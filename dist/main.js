(()=>{"use strict";const e=function(){let e=[],t=["personal","work"];function n(e){e.sort(((e,t)=>e.dueDate>t.dueDate?1:-1))}return{allCurrentTasks:function(){let t=[];for(let n=0;n<e.length;n++)if(!1===e[n].status){let i=e[n];i.dataSet=n,t.push(i)}return t},updateStatus:function(t){return!1===e[t].status?e[t].status=!0:e[t].status=!1},completedFilter:function(){let t=[];for(let n=0;n<e.length;n++)if(!0===e[n].status){let i=e[n];i.dataSet=n,t.push(i)}return t},addItem:function(t){e.push(t),n(e)},itemFactory:(e,t,n,i,d,o)=>({status:e,priority:t,title:n,description:i,dueDate:d,category:o}),editItem:function(t,i,d,o,l,a){e[t].priority=i,e[t].title=d,e[t].description=o,e[t].dueDate=l,e[t].category=a,n(e)},deleteItem:function(t){e.splice(t,1),n(e)},weeklyFilter:function(){const t=new Date;let n=t.toISOString().slice(0,10);t.setDate(t.getDate()+7);let i=t.toISOString().slice(0,10),d=[];for(let t=0;t<e.length;t++)if(e[t].dueDate>=n&&e[t].dueDate<=i&&!1===e[t].status){let n=e[t];n.dataSet=t,d.push(n)}return d},dailyFilter:function(){let t=(new Date).toISOString().slice(0,10),n=[];for(let i=0;i<e.length;i++)if(e[i].dueDate==t&&!1===e[i].status){let t=e[i];t.dataSet=i,n.push(t)}return n},categoryFilter:function(t){let n=[];for(let i=0;i<e.length;i++)if(e[i].category.toLowerCase()==t.toLowerCase()&&!1===e[i].status){let t=e[i];t.dataSet=i,n.push(t)}return n},itemArray:e,categories:t,addCategory:function(e){!1===t.includes(e.toLowerCase())&&t.push(e)},editCategory:function(n,i){if(!1===t.includes(i.toLowerCase())){for(let t=0;t<e.length;t++)e[t].category===n&&(e[t].category=i);for(let e=0;e<t.length;e++)t[e]===n&&(t[e]=i)}},deleteCategory:function(n){for(let t=0;t<e.length;t++)e[t].category===n&&e.splice(t);for(let e=0;e<t.length;e++)t[e]===n&&t.splice(e,1)}}}(),t=document.getElementById("add-item"),n=document.getElementById("add-cat"),i=document.getElementById("modal-close"),d=document.getElementById("edit-close"),o=document.getElementById("category-close"),l=document.getElementById("edit-category-close"),a=function(){const a=function(){function e(){s(),c(),y(),document.querySelector(".modal").style.display="flex"}function a(){g(),document.querySelector(".modal").style.display="none"}function c(){g(),document.querySelector(".edit-modal").style.display="none"}function s(){g(),document.querySelector(".category-modal").style.display="none"}function u(){g(),document.querySelector(".edit-category-modal").style.display="none"}function m(){a(),c(),y(),document.querySelector(".category-modal").style.display="flex"}function y(){document.querySelector(".modal-container").style.display="flex",document.querySelector(".modal-container").style["pointer-events"]="all"}function g(){document.querySelector(".modal-container").style.display="none",document.querySelector(".modal-container").style["pointer-events"]="none"}return t.addEventListener("click",(function(){e()})),i.addEventListener("click",(function(){a()})),d.addEventListener("click",(function(){c()})),l.addEventListener("click",(function(){u()})),n.addEventListener("click",(function(){m()})),o.addEventListener("click",(function(){s()})),r(),{activateContainer:y,deactivateContainer:g,showModal:e,hideModal:a,showEditModal:function(){a(),s(),y(),document.querySelector(".edit-modal").style.display="flex"},hideEditModal:c,showCategoryModal:m,hideCategoryModal:s,showEditCategoryModal:function(){y(),document.querySelector(".edit-category-modal").style.display="flex"},hideEditCategoryModal:u}}();function r(){const t=document.getElementById("category-list"),n=document.querySelector("#main-category"),i=document.querySelector("#edit-category");t.innerHTML="",n.innerHTML="",i.innerHTML="";let d=document.createElement("option");d.value="add",d.id="last-option",d.innerText="Add new category...",n.appendChild(d);let o=document.createElement("option");o.value="",o.setAttribute("disabled",""),o.setAttribute("selected",""),o.innerText="Select your option",n.insertBefore(o,d);let l=document.createElement("option");l.value="add",l.id="last-option",l.innerText="Add new category...",i.appendChild(l);let a=document.createElement("option");a.value="",a.setAttribute("disabled",""),a.setAttribute("selected",""),a.innerText="Select your option",i.insertBefore(a,l);for(let o=0;o<e.categories.length;o++){let a=e.categories[o].charAt(0).toUpperCase()+e.categories[o].slice(1),r=document.createElement("li");r.setAttribute("data-set",o),r.setAttribute("id",a.toLowerCase()),r.classList.add("sidebar-item"),r.innerText=a,t.appendChild(r);let c=document.createElement("option");c.value=a,c.innerHTML=a;let s=c.cloneNode(!0);n.insertBefore(c,d),i.insertBefore(s,l)}document.getElementById("main-text-category").style.display="none",document.getElementById("edit-text-category").style.display="none"}return{modalControl:a,displayEdit:function(t){a.showEditModal();let n=e.itemArray[t].priority;document.querySelector(`input[name="edit-priority"][value="${n}"]`).checked=!0;let i=e.itemArray[t].title;document.getElementById("edit-title").value=i;let d=e.itemArray[t].description;document.getElementById("edit-description").value=d;let o=e.itemArray[t].dueDate;o=new Date(o),o=o.toISOString(),o=o.slice(0,10),document.getElementById("edit-date").value=o;let l=e.itemArray[t].category;document.getElementById("edit-category").value=l},displayEditCategory:function(e){a.showEditCategoryModal(),document.getElementById("edit-category-sidebar").value=e},displayTask:function(e,t){for(;document.querySelector("tbody").childNodes.length>1;)document.querySelector("tbody").removeChild(document.querySelector("tbody").lastChild);for(let n=0;n<e.length;n++){let i=e[n].priority,d=e[n].title,o=e[n].description,l=e[n].dueDate,a=e[n].category,r=e[n].status,c=e[n].dataSet,s=document.createElement("tr");s.setAttribute("data-set",n),s.setAttribute("original-index",c);let u=document.createElement("td"),m=document.createElement("button");m.setAttribute("class","status-change"),m.setAttribute("onclick","return false;");let y=document.createElement("img");!0===r?(y.setAttribute("src",`../src/images/completed-status-${t}.svg`),y.setAttribute("class","checked")):(y.setAttribute("src",`../src/images/pending-status-${t}.svg`),y.setAttribute("class","unchecked")),y.setAttribute("width","25px"),y.setAttribute("height","25px"),m.appendChild(y),u.appendChild(m),s.appendChild(u);let g=document.createElement("td"),p=document.createElement("img");"low"===i?p.setAttribute("src","../src/images/low-priority.svg"):"medium"===i?p.setAttribute("src","../src/images/medium-priority.svg"):p.setAttribute("src","../src/images/high-priority.svg"),p.setAttribute("width","25px"),p.setAttribute("height","25px"),g.appendChild(p),s.appendChild(g);let h=document.createElement("td");h.innerHTML=d,s.appendChild(h);let E=document.createElement("td");E.innerHTML=o,s.appendChild(E);let f=document.createElement("td");f.innerHTML=l,s.appendChild(f);let v=document.createElement("td");v.innerHTML=a,s.appendChild(v);let b=document.createElement("td"),I=document.createElement("button"),C=document.createElement("img");C.setAttribute("src",`../src/images/edit-${t}.svg`),C.setAttribute("class","edit-btn"),C.setAttribute("width","25px"),C.setAttribute("height","25px"),I.appendChild(C),b.appendChild(I),s.appendChild(b),document.querySelector("tbody").appendChild(s)}},tableTitle:function(e){document.getElementById("table-title").innerHTML=e},resetForms:function(){document.getElementById("edit-form").reset(),document.getElementById("modal-form").reset(),document.getElementById("category-form").reset(),document.getElementById("edit-category-form").reset()},displayUpdateCategory:r,highlightSection:function(e){document.querySelectorAll(".highlight-polygon").forEach((e=>{e.remove()}));const t=document.getElementById(e),n=document.createElement("img");n.setAttribute("src","../src/images/highlight-polygon.svg"),n.setAttribute("class","highlight-polygon"),n.setAttribute("height","25px"),n.setAttribute("width","25px"),t.appendChild(n)},setRemoveCategory:function(e){const t=document.getElementById(e).getAttribute("data-set");document.getElementsByClassName("remove-cat-btn")[0].setAttribute("data-set",t)}}}(),r=document.getElementById("modal-submit"),c=document.getElementById("add-item"),s=document.getElementsByClassName("remove-cat-btn")[0];let u,m,y,g,p="viewAll",h="light";const E=localStorage.getItem("theme");function f(e){if("submitModal"===e){if(!document.getElementById("modal-form").checkValidity())return document.getElementById("modal-form").reportValidity(),!1;if(""!=document.getElementById("main-category").value&&"none"===document.getElementById("main-text-category").style.display||""!=document.getElementById("main-text-category").value)return!0}else if("editModal"===e){if(!document.getElementById("edit-form").checkValidity())return document.getElementById("edit-form").reportValidity(),!1;if(""!=document.getElementById("edit-category").value&&"none"===document.getElementById("edit-text-category").style.display||""!=document.getElementById("edit-text-category").value)return!0}else{if("editCategoryModal"===e)return!!document.getElementById("edit-category-form").checkValidity()||(document.getElementById("edit-category-form").reportValidity(),!1);if("categoryModal"===e)return!!document.getElementById("category-form").checkValidity()||(document.getElementById("category-form").reportValidity(),!1)}}function v(){a.tableTitle("Viewing All Tasks");let t=e.allCurrentTasks();a.displayTask(t,h),p="viewAll",c.style.visibility="visible",s.style.visibility="hidden",a.highlightSection("view-all")}function b(){p="today";let t=e.dailyFilter();a.displayTask(t,h),a.tableTitle("Viewing Today's Tasks"),c.style.visibility="visible",s.style.visibility="hidden",a.highlightSection("today")}function I(){p="thisWeek";let t=e.weeklyFilter();a.displayTask(t,h),a.tableTitle("Viewing This Week's Tasks"),c.style.visibility="visible",s.style.visibility="hidden",a.highlightSection("this-week")}function C(){p="completedTasks";let t=e.completedFilter();a.displayTask(t,h),a.tableTitle("Viewing Completed Tasks"),c.style.visibility="hidden",s.style.visibility="hidden",a.highlightSection("completed-tasks")}function B(t){p=t;let n=e.categoryFilter(t);a.tableTitle("Viewing all "+t+" tasks"),a.displayTask(n,h),a.highlightSection(t),a.setRemoveCategory(t),s.style.visibility="visible",c.style.visibility="visible"}function k(){switch(p){case"viewAll":v();break;case"today":b();break;case"thisWeek":I();break;case"completedTasks":C()}"viewAll"!=p&&"today"!=p&&"thisWeek"!=p&&"completedTasks"!=p&&B(p),a.resetForms()}r.addEventListener("click",(function(){if(f("submitModal")){let t=document.querySelector('input[name="priority"]:checked').value,n=document.getElementById("title").value,i=document.getElementById("description").value,d=document.getElementById("due-date").value;d=new Date(d).toLocaleDateString("en-US",{timeZone:"UTC"});let o=document.getElementById("main-category").value,l=!1;"add"===o&&(o=document.getElementById("main-text-category").value.toLowerCase(),e.addCategory(o),a.displayUpdateCategory()),e.addItem(e.itemFactory(l,t,n,i,d,o)),a.modalControl.hideModal(),k()}})),document.addEventListener("click",(function(t){if(t.target&&"edit-btn"===t.target.className)u=t.target.parentElement.parentElement.parentElement.getAttribute("original-index"),a.displayEdit(u);else if(e.categories.includes(t.target.id.toLowerCase())){let e=t.target.innerText.toLowerCase();p=e,B(e)}else if(t.target&&"remove-cat-btn"===t.target.className){let n=t.target.getAttribute("data-set"),i=e.categories[n];a.displayEditCategory(i),m=i,p=m}else"status-change"===t.target.parentElement.className&&(g=t.target.parentElement.parentElement.parentElement.getAttribute("original-index"),e.updateStatus(g),k())})),document.getElementById("edit-submit").addEventListener("click",(function(){if(f("editModal")){let t=document.querySelector('input[name="edit-priority"]:checked').value,n=document.getElementById("edit-title").value,i=document.getElementById("edit-description").value,d=document.getElementById("edit-date").value;const[o,l,r]=d.split("-");d=`${parseInt(l)}/${parseInt(r)}/${o}`;let c=document.getElementById("edit-category").value;"add"===c&&(c=document.getElementById("edit-text-category").value.toLowerCase(),e.addCategory(c),a.displayUpdateCategory()),e.editItem(u,t,n,i,d,c),a.modalControl.hideEditModal(),k()}})),document.getElementById("edit-category-submit").addEventListener("click",(function(){f("editCategoryModal")&&(y=document.getElementById("edit-category-sidebar").value,p=y,e.editCategory(m,y),a.modalControl.hideEditCategoryModal(),a.displayUpdateCategory(),k())})),document.getElementById("delete-item").addEventListener("click",(function(){e.deleteItem(u),a.modalControl.hideEditModal(),a.displayTask(e.itemArray)})),document.getElementById("view-all").addEventListener("click",(function(){v()})),document.getElementById("today").addEventListener("click",(function(){b()})),document.getElementById("this-week").addEventListener("click",(function(){I()})),document.getElementById("completed-tasks").addEventListener("click",(function(){C()})),document.getElementById("mobile-sidebar-toggle").addEventListener("click",(function(){const e=document.querySelector(".sidebar"),t=document.querySelectorAll(".menu-line");"flex"===e.style.display?(e.style.display="none",t.forEach((e=>{e.classList.remove("active")}))):(e.style.display="flex",t.forEach((e=>{e.classList.add("active")})))})),E&&document.documentElement.setAttribute("data-theme",E),"dark"===E&&(document.querySelector(".header img").setAttribute("src","../src/images/logo-dark.png"),document.getElementById("sun").setAttribute("src","../src/images/sun-dark.svg"),document.getElementById("moon").setAttribute("src","../src/images/moon-dark.svg")),document.querySelector('.toggle-section input[type="checkbox"]').addEventListener("change",(e=>{e.target.checked?(h="dark",localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-theme","dark"),document.querySelector(".header img").setAttribute("src","../src/images/logo-dark.png"),document.getElementById("sun").setAttribute("src","../src/images/sun-dark.svg"),document.getElementById("moon").setAttribute("src","../src/images/moon-dark.svg"),v()):(h="light",localStorage.setItem("theme","light"),document.documentElement.setAttribute("data-theme","light"),document.querySelector(".header img").setAttribute("src","../src/images/logo-light.png"),document.getElementById("sun").setAttribute("src","../src/images/sun-light.svg"),document.getElementById("moon").setAttribute("src","../src/images/moon-light.svg"),v())})),document.getElementById("category-submit").addEventListener("click",(function(){if(f("categoryModal")){const t=document.getElementById("category-category").value.toLowerCase();e.addCategory(t),a.displayUpdateCategory(),a.modalControl.hideCategoryModal(),a.resetForms(),B(t)}})),document.getElementById("delete-category").addEventListener("click",(function(){a.modalControl.hideEditCategoryModal(),a.modalControl.activateContainer(),document.getElementById("delete-category-name").innerText=m,document.querySelector(".delete-category-warning").style.display="flex",document.getElementById("confirm-delete").addEventListener("click",(function(){e.deleteCategory(m),document.querySelector(".delete-category-warning").style.display="none",a.modalControl.deactivateContainer(),a.displayUpdateCategory(),v()})),document.getElementById("cancel-delete").addEventListener("click",(function(){document.querySelector(".delete-category-warning").style.display="none",a.modalControl.showEditCategoryModal()}))})),v()})();