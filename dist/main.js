(()=>{"use strict";const e=function(){let e=[],t=["personal","work"];function n(e){e.sort(((e,t)=>e.dueDate>t.dueDate?1:-1))}return{allCurrentTasks:function(){let t=[];for(let n=0;n<e.length;n++)if(!1===e[n].status){let d=e[n];d.dataSet=n,t.push(d)}return t},updateStatus:function(t){return!1===e[t].status?e[t].status=!0:e[t].status=!1},completedFilter:function(){let t=[];for(let n=0;n<e.length;n++)if(!0===e[n].status){let d=e[n];d.dataSet=n,t.push(d)}return t},addItem:function(t){e.push(t),n(e)},itemFactory:(e,t,n,d,l,o)=>({status:e,priority:t,title:n,description:d,dueDate:l,category:o}),editItem:function(t,d,l,o,i,a){e[t].priority=d,e[t].title=l,e[t].description=o,e[t].dueDate=i,e[t].category=a,n(e)},deleteItem:function(t){e.splice(t,1),n(e)},weeklyFilter:function(){const t=new Date;let n=t.toISOString().slice(0,10);t.setDate(t.getDate()+7);let d=t.toISOString().slice(0,10),l=[];for(let t=0;t<e.length;t++)if(e[t].dueDate>=n&&e[t].dueDate<=d&&!1===e[t].status){let n=e[t];n.dataSet=t,l.push(n)}return l},dailyFilter:function(){let t=(new Date).toISOString().slice(0,10),n=[];for(let d=0;d<e.length;d++)if(e[d].dueDate==t&&!1===e[d].status){let t=e[d];t.dataSet=d,n.push(t)}return n},categoryFilter:function(t){let n=[];for(let d=0;d<e.length;d++)if(e[d].category==t&&!1===e[d].status){let t=e[d];t.dataSet=d,n.push(t)}return n},itemArray:e,categories:t,addCategory:function(e){!1===t.includes(e.toLowerCase())&&t.push(e)},editCategory:function(n,d){if(!1===t.includes(d.toLowerCase())){for(let t=0;t<e.length;t++)e[t].category===n&&(e[t].category=d);for(let e=0;e<t.length;e++)t[e]===n&&(t[e]=d)}},deleteCategory:function(n){for(let t=0;t<e.length;t++)e[t].category===n&&e.splice(t);for(let e=0;e<t.length;e++)t[e]===n&&t.splice(e,1)}}}(),t=document.getElementById("add-item"),n=document.getElementById("add-cat"),d=document.getElementById("modal-close"),l=document.getElementById("edit-close"),o=document.getElementById("category-close"),i=document.getElementById("edit-category-close"),a=function(){const a=function(){function e(){u(),c(),document.querySelector(".modal").style.display="flex"}function a(){document.querySelector(".modal").style.display="none"}function c(){document.querySelector(".edit-modal").style.display="none"}function u(){document.querySelector(".category-modal").style.display="none"}function s(){document.querySelector(".edit-category-modal").style.display="none"}function m(){a(),c(),document.querySelector(".category-modal").style.display="flex"}return t.addEventListener("click",(function(){e()})),d.addEventListener("click",(function(){a()})),l.addEventListener("click",(function(){c()})),i.addEventListener("click",(function(){s()})),n.addEventListener("click",(function(){m()})),o.addEventListener("click",(function(){u()})),r(),{showModal:e,hideModal:a,showEditModal:function(){a(),u(),document.querySelector(".edit-modal").style.display="flex"},hideEditModal:c,showCategoryModal:m,hideCategoryModal:u,showEditCategoryModal:function(){document.querySelector(".edit-category-modal").style.display="flex"},hideEditCategoryModal:s}}();function r(){const t=document.getElementById("category-list"),n=document.querySelector("#main-category"),d=document.querySelector("#edit-category");t.innerHTML="",n.innerHTML="",d.innerHTML="";let l=document.createElement("option");l.value="add",l.id="last-option",l.innerText="Add new category...",n.appendChild(l);let o=document.createElement("option");o.value="",o.setAttribute("disabled",""),o.setAttribute("selected",""),o.innerText="Select your option",n.insertBefore(o,l);let i=document.createElement("option");i.value="add",i.id="last-option",i.innerText="Add new category...",d.appendChild(i);let a=document.createElement("option");a.value="",a.setAttribute("disabled",""),a.setAttribute("selected",""),a.innerText="Select your option",d.insertBefore(a,i);for(let o=0;o<e.categories.length;o++){let a=e.categories[o],r=document.createElement("li");r.innerHTML='<a id="'+a+'"href="#" onclick="return false;">'+a+'</a><button class="remove-cat-btn" data-set = '+o+">✎</button>",t.appendChild(r);let c=document.createElement("option");c.value=a,c.innerHTML=a;let u=c.cloneNode(!0);n.insertBefore(c,l),d.insertBefore(u,i)}document.getElementById("main-text-category").style.display="none",document.getElementById("edit-text-category").style.display="none"}return{modalControl:a,displayEdit:function(t){a.showEditModal();let n=e.itemArray[t].priority;document.getElementById("edit-priority").value=n;let d=e.itemArray[t].title;document.getElementById("edit-title").value=d;let l=e.itemArray[t].description;document.getElementById("edit-description").value=l;let o=e.itemArray[t].dueDate;document.getElementById("edit-date").value=o;let i=e.itemArray[t].category;document.getElementById("edit-category").value=i},displayEditCategory:function(e){a.showEditCategoryModal(),document.getElementById("edit-category-sidebar").value=e},displayTask:function(e){for(;document.querySelector("tbody").childNodes.length>1;)document.querySelector("tbody").removeChild(document.querySelector("tbody").lastChild);for(let t=0;t<e.length;t++){let n=e[t].priority,d=e[t].title,l=e[t].description,o=e[t].dueDate,i=e[t].category,a=e[t].status,r=e[t].dataSet,c=document.createElement("tr");c.setAttribute("data-set",t),c.setAttribute("original-index",r);let u=document.createElement("td"),s=document.createElement("a");s.setAttribute("class","status-change"),s.setAttribute("href","#"),s.setAttribute("onclick","return false;");let m=document.createElement("img");!0===a?(m.setAttribute("src","../src/images/checked.svg"),m.setAttribute("width","20px"),m.setAttribute("height","20px"),m.setAttribute("class","checked")):(m.setAttribute("src","../src/images/unchecked.svg"),m.setAttribute("width","20px"),m.setAttribute("height","20px"),m.setAttribute("class","unchecked")),s.appendChild(m),u.appendChild(s),c.appendChild(u);let y=document.createElement("td"),g=document.createElementNS("http://www.w3.org/2000/svg","svg");g.setAttribute("viewBox","0 0 12 12"),g.setAttribute("width","20px"),g.setAttribute("height","20px"),g.setAttribute("overflow","visible");let p=document.createElementNS("http://www.w3.org/2000/svg","circle");p.setAttribute("cx","6"),p.setAttribute("cy","6"),p.setAttribute("r","6"),p.setAttribute("fill-rule","evenodd"),"low"===n?p.setAttribute("fill","#638f65"):"medium"===n?p.setAttribute("fill","#b0ba65"):p.setAttribute("fill","#ad6749"),g.appendChild(p),y.appendChild(g),c.appendChild(y);let f=document.createElement("td");f.innerHTML=d,c.appendChild(f);let E=document.createElement("td");E.innerHTML=l,c.appendChild(E);let h=document.createElement("td");h.innerHTML=o,c.appendChild(h);let I=document.createElement("td");I.innerHTML=i,c.appendChild(I);let B=document.createElement("td");B.innerHTML='<button class="edit-btn">✎</button>',c.appendChild(B),document.querySelector("tbody").appendChild(c)}},tableTitle:function(e){document.getElementById("table-title").innerHTML=e},resetForms:function(){document.getElementById("edit-form").reset(),document.getElementById("modal-form").reset(),document.getElementById("category-form").reset(),document.getElementById("edit-category-form").reset()},displayUpdateCategory:r}}(),r=document.getElementById("modal-submit"),c=document.getElementById("add-item");let u,s,m,y,g="viewAll";function p(e){if("submitModal"===e){if(!document.getElementById("modal-form").checkValidity())return document.getElementById("modal-form").reportValidity(),!1;if(""!=document.getElementById("main-category").value&&"none"===document.getElementById("main-text-category").style.display||""!=document.getElementById("main-text-category").value)return!0}else if("editModal"===e){if(!document.getElementById("edit-form").checkValidity())return document.getElementById("edit-form").reportValidity(),!1;if(""!=document.getElementById("edit-category").value&&"none"===document.getElementById("edit-text-category").style.display||""!=document.getElementById("edit-text-category").value)return!0}else{if("editCategoryModal"===e)return!!document.getElementById("edit-category-form").checkValidity()||(document.getElementById("edit-category-form").reportValidity(),!1);if("categoryModal"===e)return!!document.getElementById("category-form").checkValidity()||(document.getElementById("category-form").reportValidity(),!1)}}function f(){a.tableTitle("Viewing All Tasks");let t=e.allCurrentTasks();a.displayTask(t),g="viewAll",c.style.display="flex"}function E(){g="today";let t=e.dailyFilter();a.displayTask(t),a.tableTitle("Viewing Today's Tasks"),c.style.display="flex"}function h(){g="thisWeek";let t=e.weeklyFilter();a.displayTask(t),a.tableTitle("Viewing This Week's Tasks"),c.style.display="flex"}function I(){g="completedTasks";let t=e.completedFilter();a.displayTask(t),a.tableTitle("Viewing Completed Tasks"),c.style.display="none"}function B(t){g=t;let n=e.categoryFilter(t);a.tableTitle("Viewing all "+t+" tasks"),a.displayTask(n)}function b(){switch(g){case"viewAll":f();break;case"today":E();break;case"thisWeek":h();break;case"completedTasks":I()}"viewAll"!=g&&"today"!=g&&"thisWeek"!=g&&"completedTasks"!=g&&B(g),a.resetForms()}r.addEventListener("click",(function(){if(p("submitModal")){let t=document.getElementById("priority").value,n=document.getElementById("title").value,d=document.getElementById("description").value,l=document.getElementById("due-date").value,o=document.getElementById("main-category").value,i=!1;"add"===o&&(o=document.getElementById("main-text-category").value.toLowerCase(),e.addCategory(o),a.displayUpdateCategory()),e.addItem(e.itemFactory(i,t,n,d,l,o)),a.modalControl.hideModal(),b()}})),document.addEventListener("click",(function(t){if(t.target&&"edit-btn"===t.target.className)u=t.target.parentElement.parentElement.getAttribute("original-index"),a.displayEdit(u);else if(e.categories.includes(t.target.id)&&"A"==t.target.tagName){let e=t.target.innerText.toLowerCase();g=e,B(e)}else if(t.target&&"remove-cat-btn"===t.target.className){let n=t.target.getAttribute("data-set"),d=e.categories[n];a.displayEditCategory(d),s=d,g=s}else"status-change"===t.target.parentElement.className&&(y=t.target.parentElement.parentElement.parentElement.getAttribute("original-index"),e.updateStatus(y),b())})),document.getElementById("edit-submit").addEventListener("click",(function(){if(p("editModal")){let t=document.getElementById("edit-priority").value,n=document.getElementById("edit-title").value,d=document.getElementById("edit-description").value,l=document.getElementById("edit-date").value,o=document.getElementById("edit-category").value;"add"===o&&(o=document.getElementById("edit-text-category").value.toLowerCase(),e.addCategory(o),a.displayUpdateCategory()),e.editItem(u,t,n,d,l,o),a.modalControl.hideEditModal(),b()}})),document.getElementById("edit-category-submit").addEventListener("click",(function(){p("editCategoryModal")&&(m=document.getElementById("edit-category-sidebar").value,g=m,e.editCategory(s,m),a.modalControl.hideEditCategoryModal(),a.displayUpdateCategory(),b())})),document.getElementById("delete-item").addEventListener("click",(function(){e.deleteItem(u),a.modalControl.hideEditModal(),a.displayTask(e.itemArray)})),document.getElementById("view-all").addEventListener("click",(function(){f()})),document.getElementById("today").addEventListener("click",(function(){E()})),document.getElementById("this-week").addEventListener("click",(function(){h()})),document.getElementById("completed-tasks").addEventListener("click",(function(){I()})),document.getElementById("category-submit").addEventListener("click",(function(){if(p("categoryModal")){const t=document.getElementById("category-category").value.toLowerCase();e.addCategory(t),B(t),a.displayUpdateCategory(),a.modalControl.hideCategoryModal(),a.resetForms()}})),document.getElementById("delete-category").addEventListener("click",(function(){a.modalControl.hideEditCategoryModal(),document.getElementById("delete-category-name").innerText=s,document.querySelector(".delete-category-warning").style.display="flex",document.getElementById("confirm-delete").addEventListener("click",(function(){e.deleteCategory(s),document.querySelector(".delete-category-warning").style.display="none",a.displayUpdateCategory(),f()})),document.getElementById("cancel-delete").addEventListener("click",(function(){document.querySelector(".delete-category-warning").style.display="none",a.modalControl.showEditCategoryModal()}))}))})();