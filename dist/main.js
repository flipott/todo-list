(()=>{"use strict";const e=function(){let e=[];function t(e){e.sort(((e,t)=>e.dueDate>t.dueDate?1:-1))}return{addItem:function(n){e.push(n),t(e),console.log(e)},itemFactory:(e,t,n,d,i)=>({priority:e,title:t,description:n,dueDate:d,category:i}),editItem:function(t,n,d,i,l,o){e[t].priority=n,e[t].title=d,e[t].description=i,e[t].dueDate=l,e[t].category=o,console.log(e)},deleteItem:function(n){e.splice(n,1),t(e)},weeklyFilter:function(){const t=new Date;let n=t.toISOString().slice(0,10);t.setDate(t.getDate()+7);let d=t.toISOString().slice(0,10),i=[];for(let t=0;t<e.length;t++)e[t].dueDate>=n&&e[t].dueDate<=d&&i.push(e[t]);return i},dailyFilter:function(){let t=(new Date).toISOString().slice(0,10),n=[];for(let d=0;d<e.length;d++)e[d].dueDate==t&&n.push(e[d]);return n},categoryFilter:function(t){let n=[];for(let d=0;d<e.length;d++)e[d].category==t&&n.push(e[d]);return n},itemArray:e,categories:["personal","work"]}}(),t=document.getElementById("add-item"),n=document.getElementById("modal-close"),d=document.getElementById("edit-close");let i=function(){function e(){document.querySelector(".modal").style.display="flex"}function i(){document.querySelector(".modal").style.display="none"}function l(){document.querySelector(".edit-modal").style.display="none"}return t.addEventListener("click",(function(){e()})),n.addEventListener("click",(function(){i()})),d.addEventListener("click",(function(){l()})),{showModal:e,hideModal:i,showEditModal:function(){document.querySelector(".edit-modal").style.display="flex"},hideEditModal:l}}();function l(e){for(;document.querySelector("tbody").childNodes.length>1;)document.querySelector("tbody").removeChild(document.querySelector("tbody").lastChild);for(let t=0;t<e.length;t++){let n=e[t].priority,d=e[t].title,i=e[t].description,l=e[t].dueDate,o=e[t].category,c=document.createElement("tr");c.setAttribute("data-set",t);let a=document.createElement("td");a.innerHTML='<input type="checkbox" value="test" checked="unchecked">',c.appendChild(a);let r=document.createElement("td");r.innerHTML="<p class="+n+">⚫</p>",c.appendChild(r);let u=document.createElement("td");u.innerHTML=d,c.appendChild(u);let m=document.createElement("td");m.innerHTML=i,c.appendChild(m);let s=document.createElement("td");s.innerHTML=l,c.appendChild(s);let y=document.createElement("td");y.innerHTML=o,c.appendChild(y);let g=document.createElement("td");g.innerHTML='<button class="edit-btn">✎</button>',c.appendChild(g),document.querySelector("tbody").appendChild(c)}}function o(e){document.getElementById("table-title").innerHTML=e}const c=document.getElementById("modal-submit");let a,r="viewAll";function u(){r="today",l(e.dailyFilter()),o("Viewing Today's Tasks")}function m(){r="thisWeek",l(e.weeklyFilter()),o("Viewing This Week's Tasks")}function s(t){let n=e.categoryFilter(t);o("Viewing all "+t+" tasks"),l(n)}c.addEventListener("click",(function(){let t=document.getElementById("priority").value,n=document.getElementById("title").value,d=document.getElementById("description").value,o=document.getElementById("due-date").value,c=document.getElementById("category").value;switch(e.addItem(e.itemFactory(t,n,d,o,c)),i.hideModal(),r){case"viewAll":l(e.itemArray);break;case"today":u();break;case"thisWeek":m()}"viewAll"!=r&&"today"!=r&&"thisWeek"!=r&&s(r),document.getElementById("modal-form").reset()})),document.addEventListener("click",(function(t){if(t.target&&"edit-btn"===t.target.className)a=t.target.parentElement.parentElement.getAttribute("data-set"),function(t){i.showEditModal();let n=e.itemArray[t].priority;document.getElementById("edit-priority").value=n;let d=e.itemArray[t].title;document.getElementById("edit-title").value=d;let l=e.itemArray[t].description;document.getElementById("edit-description").value=l;let o=e.itemArray[t].dueDate;document.getElementById("edit-date").value=o;let c=e.itemArray[t].category;document.getElementById("edit-category").value=c}(a);else if(e.categories.includes(t.target.innerText.toLowerCase())&&"A"==t.target.tagName){let e=t.target.innerText.toLowerCase();r=e,s(e)}})),document.getElementById("edit-submit").addEventListener("click",(function(){let t=document.getElementById("edit-priority").value,n=document.getElementById("edit-title").value,d=document.getElementById("edit-description").value,o=document.getElementById("edit-date").value,c=document.getElementById("edit-category").value;e.editItem(a,t,n,d,o,c),i.hideEditModal(),l(e.itemArray)})),document.getElementById("delete-item").addEventListener("click",(function(){e.deleteItem(a),i.hideEditModal(),l(e.itemArray)})),document.getElementById("view-all").addEventListener("click",(function(){o("Viewing All Tasks"),r="viewAll",l(e.itemArray)})),document.getElementById("today").addEventListener("click",(function(){u()})),document.getElementById("this-week").addEventListener("click",(function(){m()}))})();