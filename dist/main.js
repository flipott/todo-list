(()=>{"use strict";const e=function(){let e=[],t=["personal","work"];function n(e){e.sort(((e,t)=>e.dueDate>t.dueDate?1:-1))}return{addItem:function(t){e.push(t),n(e),console.log(e)},itemFactory:(e,t,n,d,o)=>({priority:e,title:t,description:n,dueDate:d,category:o}),editItem:function(t,n,d,o,l,i){e[t].priority=n,e[t].title=d,e[t].description=o,e[t].dueDate=l,e[t].category=i,console.log(e)},deleteItem:function(t){e.splice(t,1),n(e)},weeklyFilter:function(){const t=new Date;let n=t.toISOString().slice(0,10);t.setDate(t.getDate()+7);let d=t.toISOString().slice(0,10),o=[];for(let t=0;t<e.length;t++)e[t].dueDate>=n&&e[t].dueDate<=d&&o.push(e[t]);return o},dailyFilter:function(){let t=(new Date).toISOString().slice(0,10),n=[];for(let d=0;d<e.length;d++)e[d].dueDate==t&&n.push(e[d]);return n},categoryFilter:function(t){let n=[];for(let d=0;d<e.length;d++)e[d].category==t&&n.push(e[d]);return n},itemArray:e,categories:t,addCategory:function(e){t.push(e)}}}(),t=document.getElementById("add-item"),n=document.getElementById("add-cat"),d=document.getElementById("modal-close"),o=document.getElementById("edit-close"),l=document.getElementById("category-close"),i=document.getElementById("main-category");document.getElementById("main-text-category");let c=function(){function e(){r(),a(),document.querySelector(".modal").style.display="flex"}function c(){document.querySelector(".modal").style.display="none"}function a(){document.querySelector(".edit-modal").style.display="none"}function r(){document.querySelector(".category-modal").style.display="none"}function u(){c(),a(),document.querySelector(".category-modal").style.display="flex"}return"Add new category..."===i.value&&console.log("Wow!"),t.addEventListener("click",(function(){e()})),d.addEventListener("click",(function(){c()})),o.addEventListener("click",(function(){a()})),n.addEventListener("click",(function(){u()})),l.addEventListener("click",(function(){r()})),{showModal:e,hideModal:c,showEditModal:function(){c(),r(),document.querySelector(".edit-modal").style.display="flex"},hideEditModal:a,showCategoryModal:u,hideCategoryModal:r}}();function a(e){const t=document.querySelector("#category-list");let n=document.createElement("li");n.innerHTML="<a id="+e+' href="#" onclick="return false;">'+e+"</a>",t.appendChild(n);const d=document.querySelector("#main-category"),o=document.querySelector("#last-option"),l=document.querySelector("#edit-category"),i=document.querySelector("#last-edit-option");for(let t=0;t<2;t++){let n=document.createElement("option");n.value=e,n.innerHTML=e,0==t?d.insertBefore(n,o):l.insertBefore(n,i)}document.getElementById("main-text-category").style.display="none",document.getElementById("edit-text-category").style.display="none"}function r(e){for(;document.querySelector("tbody").childNodes.length>1;)document.querySelector("tbody").removeChild(document.querySelector("tbody").lastChild);for(let t=0;t<e.length;t++){let n=e[t].priority,d=e[t].title,o=e[t].description,l=e[t].dueDate,i=e[t].category,c=document.createElement("tr");c.setAttribute("data-set",t);let a=document.createElement("td");a.innerHTML='<input type="checkbox" value="test" checked="unchecked">',c.appendChild(a);let r=document.createElement("td");r.innerHTML="<p class="+n+">⚫</p>",c.appendChild(r);let u=document.createElement("td");u.innerHTML=d,c.appendChild(u);let m=document.createElement("td");m.innerHTML=o,c.appendChild(m);let y=document.createElement("td");y.innerHTML=l,c.appendChild(y);let s=document.createElement("td");s.innerHTML=i,c.appendChild(s);let g=document.createElement("td");g.innerHTML='<button class="edit-btn">✎</button>',c.appendChild(g),document.querySelector("tbody").appendChild(c)}}function u(e){document.getElementById("table-title").innerHTML=e}function m(){document.getElementById("edit-form").reset(),document.getElementById("modal-form").reset(),document.getElementById("category-form").reset()}const y=document.getElementById("modal-submit");let s,g="viewAll";function E(){g="today",r(e.dailyFilter()),u("Viewing Today's Tasks")}function p(){g="thisWeek",r(e.weeklyFilter()),u("Viewing This Week's Tasks")}function f(t){let n=e.categoryFilter(t);u("Viewing all "+t+" tasks"),r(n)}y.addEventListener("click",(function(){let t=document.getElementById("priority").value,n=document.getElementById("title").value,d=document.getElementById("description").value,o=document.getElementById("due-date").value,l=document.getElementById("main-category").value;switch("add"===l&&(l=document.getElementById("main-text-category").value.toLowerCase(),a(l),e.addCategory(l)),e.addItem(e.itemFactory(t,n,d,o,l)),c.hideModal(),g){case"viewAll":r(e.itemArray);break;case"today":E();break;case"thisWeek":p()}"viewAll"!=g&&"today"!=g&&"thisWeek"!=g&&f(g),m()})),document.addEventListener("click",(function(t){if(t.target&&"edit-btn"===t.target.className)s=t.target.parentElement.parentElement.getAttribute("data-set"),function(t){c.showEditModal();let n=e.itemArray[t].priority;document.getElementById("edit-priority").value=n;let d=e.itemArray[t].title;document.getElementById("edit-title").value=d;let o=e.itemArray[t].description;document.getElementById("edit-description").value=o;let l=e.itemArray[t].dueDate;document.getElementById("edit-date").value=l;let i=e.itemArray[t].category;document.getElementById("edit-category").value=i}(s);else if(e.categories.includes(t.target.innerText.toLowerCase())&&"A"==t.target.tagName){let e=t.target.innerText.toLowerCase();g=e,f(e)}})),document.getElementById("edit-submit").addEventListener("click",(function(){let t=document.getElementById("edit-priority").value,n=document.getElementById("edit-title").value,d=document.getElementById("edit-description").value,o=document.getElementById("edit-date").value,l=document.getElementById("edit-category").value;switch("add"===l&&(l=document.getElementById("main-text-category").value.toLowerCase(),a(l),e.addCategory(l)),e.editItem(s,t,n,d,o,l),c.hideEditModal(),g){case"viewAll":r(e.itemArray);break;case"today":E();break;case"thisWeek":p()}"viewAll"!=g&&"today"!=g&&"thisWeek"!=g&&f(g),m()})),document.getElementById("delete-item").addEventListener("click",(function(){e.deleteItem(s),c.hideEditModal(),r(e.itemArray)})),document.getElementById("view-all").addEventListener("click",(function(){u("Viewing All Tasks"),g="viewAll",r(e.itemArray)})),document.getElementById("today").addEventListener("click",(function(){E()})),document.getElementById("this-week").addEventListener("click",(function(){p()})),document.getElementById("category-submit").addEventListener("click",(function(){const t=document.getElementById("category-category").value.toLowerCase();a(t),e.addCategory(t),c.hideCategoryModal(),m()}))})();