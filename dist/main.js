(()=>{"use strict";const e=function(){let e=[],t=["personal","work"];function i(e){e.sort(((e,t)=>e.dueDate>t.dueDate?1:-1))}return{allCurrentTasks:function(){let t=[];for(let i=0;i<e.length;i++)if(!1===e[i].status){let n=e[i];n.dataSet=i,t.push(n)}return t},updateStatus:function(t){return!1===e[t].status?e[t].status=!0:e[t].status=!1},completedFilter:function(){let t=[];for(let i=0;i<e.length;i++)if(!0===e[i].status){let n=e[i];n.dataSet=i,t.push(n)}return t},addItem:function(t){e.push(t),i(e)},itemFactory:(e,t,i,n,d,l)=>({status:e,priority:t,title:i,description:n,dueDate:d,category:l}),editItem:function(t,n,d,l,o,a){e[t].priority=n,e[t].title=d,e[t].description=l,e[t].dueDate=o,e[t].category=a,i(e)},deleteItem:function(t){e.splice(t,1),i(e)},weeklyFilter:function(){const t=new Date;let i=t.toISOString().slice(0,10);t.setDate(t.getDate()+7);let n=t.toISOString().slice(0,10),d=[];for(let t=0;t<e.length;t++)if(e[t].dueDate>=i&&e[t].dueDate<=n&&!1===e[t].status){let i=e[t];i.dataSet=t,d.push(i)}return d},dailyFilter:function(){let t=(new Date).toISOString().slice(0,10),i=[];for(let n=0;n<e.length;n++)if(e[n].dueDate==t&&!1===e[n].status){let t=e[n];t.dataSet=n,i.push(t)}return i},categoryFilter:function(t){let i=[];for(let n=0;n<e.length;n++)if(e[n].category.toLowerCase()==t.toLowerCase()&&!1===e[n].status){let t=e[n];t.dataSet=n,i.push(t)}return i},itemArray:e,categories:t,addCategory:function(e){!1===t.includes(e.toLowerCase())&&t.push(e)},editCategory:function(i,n){if(!1===t.includes(n.toLowerCase())){for(let t=0;t<e.length;t++)e[t].category===i&&(e[t].category=n);for(let e=0;e<t.length;e++)t[e]===i&&(t[e]=n)}},deleteCategory:function(i){for(let t=0;t<e.length;t++)e[t].category===i&&e.splice(t);for(let e=0;e<t.length;e++)t[e]===i&&t.splice(e,1)}}}(),t=document.getElementById("add-item"),i=document.getElementById("add-cat"),n=document.getElementById("modal-close"),d=document.getElementById("edit-close"),l=document.getElementById("category-close"),o=document.getElementById("edit-category-close"),a=function(){const a=function(){function e(){s(),c(),document.querySelector(".modal").style.display="flex"}function a(){document.querySelector(".modal").style.display="none"}function c(){document.querySelector(".edit-modal").style.display="none"}function s(){document.querySelector(".category-modal").style.display="none"}function u(){document.querySelector(".edit-category-modal").style.display="none"}function m(){a(),c(),document.querySelector(".category-modal").style.display="flex"}return t.addEventListener("click",(function(){e()})),n.addEventListener("click",(function(){a()})),d.addEventListener("click",(function(){c()})),o.addEventListener("click",(function(){u()})),i.addEventListener("click",(function(){m()})),l.addEventListener("click",(function(){s()})),r(),{showModal:e,hideModal:a,showEditModal:function(){a(),s(),document.querySelector(".edit-modal").style.display="flex"},hideEditModal:c,showCategoryModal:m,hideCategoryModal:s,showEditCategoryModal:function(){document.querySelector(".edit-category-modal").style.display="flex"},hideEditCategoryModal:u}}();function r(){const t=document.getElementById("category-list"),i=document.querySelector("#main-category"),n=document.querySelector("#edit-category");t.innerHTML="",i.innerHTML="",n.innerHTML="";let d=document.createElement("option");d.value="add",d.id="last-option",d.innerText="Add new category...",i.appendChild(d);let l=document.createElement("option");l.value="",l.setAttribute("disabled",""),l.setAttribute("selected",""),l.innerText="Select your option",i.insertBefore(l,d);let o=document.createElement("option");o.value="add",o.id="last-option",o.innerText="Add new category...",n.appendChild(o);let a=document.createElement("option");a.value="",a.setAttribute("disabled",""),a.setAttribute("selected",""),a.innerText="Select your option",n.insertBefore(a,o);for(let l=0;l<e.categories.length;l++){let a=e.categories[l].charAt(0).toUpperCase()+e.categories[l].slice(1),r=document.createElement("li");r.setAttribute("data-set",l),r.setAttribute("id",a.toLowerCase()),r.classList.add("sidebar-item"),r.innerText=a,t.appendChild(r);let c=document.createElement("option");c.value=a,c.innerHTML=a;let s=c.cloneNode(!0);i.insertBefore(c,d),n.insertBefore(s,o)}document.getElementById("main-text-category").style.display="none",document.getElementById("edit-text-category").style.display="none"}return{modalControl:a,displayEdit:function(t){a.showEditModal();let i=e.itemArray[t].priority;document.getElementById("edit-priority").value=i;let n=e.itemArray[t].title;document.getElementById("edit-title").value=n;let d=e.itemArray[t].description;document.getElementById("edit-description").value=d;let l=e.itemArray[t].dueDate;l=new Date(l),l=l.toISOString(),l=l.slice(0,10),document.getElementById("edit-date").value=l;let o=e.itemArray[t].category;document.getElementById("edit-category").value=o},displayEditCategory:function(e){a.showEditCategoryModal(),document.getElementById("edit-category-sidebar").value=e},displayTask:function(e){for(;document.querySelector("tbody").childNodes.length>1;)document.querySelector("tbody").removeChild(document.querySelector("tbody").lastChild);for(let t=0;t<e.length;t++){let i=e[t].priority,n=e[t].title,d=e[t].description,l=e[t].dueDate,o=e[t].category,a=e[t].status,r=e[t].dataSet,c=document.createElement("tr");c.setAttribute("data-set",t),c.setAttribute("original-index",r);let s=document.createElement("td"),u=document.createElement("button");u.setAttribute("class","status-change"),u.setAttribute("onclick","return false;");let m=document.createElement("img");!0===a?(m.setAttribute("src","../src/images/completed-status-light.svg"),m.setAttribute("class","checked")):(m.setAttribute("src","../src/images/pending-status-light.svg"),m.setAttribute("class","unchecked")),m.setAttribute("width","25px"),m.setAttribute("height","25px"),u.appendChild(m),s.appendChild(u),c.appendChild(s);let y=document.createElement("td"),g=document.createElement("img");"low"===i?g.setAttribute("src","../src/images/low-priority.svg"):"medium"===i?g.setAttribute("src","../src/images/medium-priority.svg"):g.setAttribute("src","../src/images/high-priority.svg"),g.setAttribute("width","25px"),g.setAttribute("height","25px"),y.appendChild(g),c.appendChild(y);let p=document.createElement("td");p.innerHTML=n,c.appendChild(p);let E=document.createElement("td");E.innerHTML=d,c.appendChild(E);let h=document.createElement("td");h.innerHTML=l,c.appendChild(h);let f=document.createElement("td");f.innerHTML=o,c.appendChild(f);let v=document.createElement("td"),b=document.createElement("button"),I=document.createElement("img");I.setAttribute("src","../src/images/edit-light.svg"),I.setAttribute("class","edit-btn"),I.setAttribute("width","25px"),I.setAttribute("height","25px"),b.appendChild(I),v.appendChild(b),c.appendChild(v),document.querySelector("tbody").appendChild(c)}},tableTitle:function(e){document.getElementById("table-title").innerHTML=e},resetForms:function(){document.getElementById("edit-form").reset(),document.getElementById("modal-form").reset(),document.getElementById("category-form").reset(),document.getElementById("edit-category-form").reset()},displayUpdateCategory:r,highlightSection:function(e){document.querySelectorAll(".highlight-polygon").forEach((e=>{e.remove()}));const t=document.getElementById(e),i=document.createElement("img");i.setAttribute("src","../src/images/highlight-polygon.svg"),i.setAttribute("class","highlight-polygon"),i.setAttribute("height","25px"),i.setAttribute("width","25px"),t.appendChild(i)},setRemoveCategory:function(e){const t=document.getElementById(e).parentElement.getAttribute("data-set");document.getElementsByClassName("remove-cat-btn")[0].setAttribute("data-set",t)}}}(),r=document.getElementById("modal-submit"),c=document.getElementById("add-item"),s=document.getElementsByClassName("remove-cat-btn")[0];let u,m,y,g,p="viewAll";function E(e){if("submitModal"===e){if(!document.getElementById("modal-form").checkValidity())return document.getElementById("modal-form").reportValidity(),!1;if(""!=document.getElementById("main-category").value&&"none"===document.getElementById("main-text-category").style.display||""!=document.getElementById("main-text-category").value)return!0}else if("editModal"===e){if(!document.getElementById("edit-form").checkValidity())return document.getElementById("edit-form").reportValidity(),!1;if(""!=document.getElementById("edit-category").value&&"none"===document.getElementById("edit-text-category").style.display||""!=document.getElementById("edit-text-category").value)return!0}else{if("editCategoryModal"===e)return!!document.getElementById("edit-category-form").checkValidity()||(document.getElementById("edit-category-form").reportValidity(),!1);if("categoryModal"===e)return!!document.getElementById("category-form").checkValidity()||(document.getElementById("category-form").reportValidity(),!1)}}function h(){a.tableTitle("Viewing All Tasks");let t=e.allCurrentTasks();a.displayTask(t),p="viewAll",c.style.visibility="visible",s.style.visibility="hidden",a.highlightSection("view-all")}function f(){p="today";let t=e.dailyFilter();a.displayTask(t),a.tableTitle("Viewing Today's Tasks"),c.style.visibility="visible",s.style.visibility="hidden",a.highlightSection("today")}function v(){p="thisWeek";let t=e.weeklyFilter();a.displayTask(t),a.tableTitle("Viewing This Week's Tasks"),c.style.visibility="visible",s.style.visibility="hidden",a.highlightSection("this-week")}function b(){p="completedTasks";let t=e.completedFilter();a.displayTask(t),a.tableTitle("Viewing Completed Tasks"),c.style.visibility="hidden",s.style.visibility="hidden",a.highlightSection("completed-tasks")}function I(t){p=t;let i=e.categoryFilter(t);a.tableTitle("Viewing all "+t+" tasks"),a.displayTask(i),a.highlightSection(t),a.setRemoveCategory(t),s.style.visibility="visible",c.style.visibility="visible"}function C(){switch(p){case"viewAll":h();break;case"today":f();break;case"thisWeek":v();break;case"completedTasks":b()}"viewAll"!=p&&"today"!=p&&"thisWeek"!=p&&"completedTasks"!=p&&I(p),a.resetForms()}r.addEventListener("click",(function(){if(E("submitModal")){let t=document.getElementById("priority").value,i=document.getElementById("title").value,n=document.getElementById("description").value,d=document.getElementById("due-date").value;d=new Date(d).toLocaleDateString("en-US",{timeZone:"UTC"});let l=document.getElementById("main-category").value,o=!1;"add"===l&&(l=document.getElementById("main-text-category").value.toLowerCase(),e.addCategory(l),a.displayUpdateCategory()),e.addItem(e.itemFactory(o,t,i,n,d,l)),a.modalControl.hideModal(),C()}})),document.addEventListener("click",(function(t){if(t.target&&"edit-btn"===t.target.className)u=t.target.parentElement.parentElement.parentElement.getAttribute("original-index"),a.displayEdit(u);else if(e.categories.includes(t.target.id.toLowerCase())){let e=t.target.innerText.toLowerCase();p=e,I(e)}else if(t.target&&"remove-cat-btn"===t.target.className){let i=t.target.getAttribute("data-set"),n=e.categories[i];a.displayEditCategory(n),m=n,p=m}else"status-change"===t.target.parentElement.className&&(g=t.target.parentElement.parentElement.parentElement.getAttribute("original-index"),e.updateStatus(g),C())})),document.getElementById("edit-submit").addEventListener("click",(function(){if(E("editModal")){let t=document.getElementById("edit-priority").value,i=document.getElementById("edit-title").value,n=document.getElementById("edit-description").value,d=document.getElementById("edit-date").value;const[l,o,r]=d.split("-");d=`${parseInt(o)}/${parseInt(r)}/${l}`;let c=document.getElementById("edit-category").value;"add"===c&&(c=document.getElementById("edit-text-category").value.toLowerCase(),e.addCategory(c),a.displayUpdateCategory()),e.editItem(u,t,i,n,d,c),a.modalControl.hideEditModal(),C()}})),document.getElementById("edit-category-submit").addEventListener("click",(function(){E("editCategoryModal")&&(y=document.getElementById("edit-category-sidebar").value,p=y,e.editCategory(m,y),a.modalControl.hideEditCategoryModal(),a.displayUpdateCategory(),C())})),document.getElementById("delete-item").addEventListener("click",(function(){e.deleteItem(u),a.modalControl.hideEditModal(),a.displayTask(e.itemArray)})),document.getElementById("view-all").addEventListener("click",(function(){h()})),document.getElementById("today").addEventListener("click",(function(){f()})),document.getElementById("this-week").addEventListener("click",(function(){v()})),document.getElementById("completed-tasks").addEventListener("click",(function(){b()})),document.getElementById("category-submit").addEventListener("click",(function(){if(E("categoryModal")){const t=document.getElementById("category-category").value.toLowerCase();e.addCategory(t),a.displayUpdateCategory(),a.modalControl.hideCategoryModal(),a.resetForms(),I(t)}})),document.getElementById("delete-category").addEventListener("click",(function(){a.modalControl.hideEditCategoryModal(),document.getElementById("delete-category-name").innerText=m,document.querySelector(".delete-category-warning").style.display="flex",document.getElementById("confirm-delete").addEventListener("click",(function(){e.deleteCategory(m),document.querySelector(".delete-category-warning").style.display="none",a.displayUpdateCategory(),h()})),document.getElementById("cancel-delete").addEventListener("click",(function(){document.querySelector(".delete-category-warning").style.display="none",a.modalControl.showEditCategoryModal()}))})),h()})();