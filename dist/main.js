(()=>{"use strict";const e=function(){let e=[],t=["personal","work"];function n(e){e.sort(((e,t)=>e.dueDate>t.dueDate?1:-1))}return{addItem:function(t){e.push(t),n(e),console.log(e)},itemFactory:(e,t,n,d,o,i)=>({status:e,priority:t,title:n,description:d,dueDate:o,category:i}),editItem:function(t,n,d,o,i,l){e[t].priority=n,e[t].title=d,e[t].description=o,e[t].dueDate=i,e[t].category=l,console.log(e)},deleteItem:function(t){e.splice(t,1),n(e)},weeklyFilter:function(){const t=new Date;let n=t.toISOString().slice(0,10);t.setDate(t.getDate()+7);let d=t.toISOString().slice(0,10),o=[];for(let t=0;t<e.length;t++)e[t].dueDate>=n&&e[t].dueDate<=d&&o.push(e[t]);return o},dailyFilter:function(){let t=(new Date).toISOString().slice(0,10),n=[];for(let d=0;d<e.length;d++)e[d].dueDate==t&&n.push(e[d]);return n},categoryFilter:function(t){let n=[];for(let d=0;d<e.length;d++)e[d].category==t&&n.push(e[d]);return n},itemArray:e,categories:t,addCategory:function(e){t.push(e)},editCategory:function(n,d){if(0==t.includes(d)){for(let t=0;t<e.length;t++)e[t].category===n&&(e[t].category=d);for(let e=0;e<t.length;e++)t[e]===n&&(t[e]=d)}},deleteCategory:function(n){for(let t=0;t<e.length;t++)e[t].category===n&&e.splice(t);for(let e=0;e<t.length;e++)t[e]===n&&t.splice(e,1)}}}(),t=document.getElementById("add-item"),n=document.getElementById("add-cat"),d=document.getElementById("modal-close"),o=document.getElementById("edit-close"),i=document.getElementById("category-close"),l=document.getElementById("edit-category-close");document.getElementById("main-category"),document.getElementById("main-text-category");let a=function(){function e(){r(),c(),document.querySelector(".modal").style.display="flex"}function a(){document.querySelector(".modal").style.display="none"}function c(){document.querySelector(".edit-modal").style.display="none"}function r(){document.querySelector(".category-modal").style.display="none"}function u(){document.querySelector(".edit-category-modal").style.display="none"}function s(){a(),c(),document.querySelector(".category-modal").style.display="flex"}return t.addEventListener("click",(function(){e()})),d.addEventListener("click",(function(){a()})),o.addEventListener("click",(function(){c()})),l.addEventListener("click",(function(){u()})),n.addEventListener("click",(function(){s()})),i.addEventListener("click",(function(){r()})),m(),{showModal:e,hideModal:a,showEditModal:function(){a(),r(),document.querySelector(".edit-modal").style.display="flex"},hideEditModal:c,showCategoryModal:s,hideCategoryModal:r,showEditCategoryModal:function(){document.querySelector(".edit-category-modal").style.display="flex"},hideEditCategoryModal:u}}();function c(e){for(;document.querySelector("tbody").childNodes.length>1;)document.querySelector("tbody").removeChild(document.querySelector("tbody").lastChild);for(let t=0;t<e.length;t++){let n=e[t].priority,d=e[t].title,o=e[t].description,i=e[t].dueDate,l=e[t].category,a=(e[t].status,document.createElement("tr"));a.setAttribute("data-set",t);let c=document.createElement("td"),r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("viewBox","0 0 12 12"),r.setAttribute("width","20px"),r.setAttribute("height","20px"),r.setAttribute("overflow","visible");let u=document.createElementNS("http://www.w3.org/2000/svg","circle");u.setAttribute("cx","6"),u.setAttribute("cy","6"),u.setAttribute("r","6"),u.setAttribute("fill","none"),u.setAttribute("stroke","red"),r.appendChild(u),c.appendChild(r),a.appendChild(c);let m=document.createElement("td"),s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("viewBox","0 0 12 12"),s.setAttribute("width","20px"),s.setAttribute("height","20px"),s.setAttribute("overflow","visible");let y=document.createElementNS("http://www.w3.org/2000/svg","circle");y.setAttribute("cx","6"),y.setAttribute("cy","6"),y.setAttribute("r","6"),y.setAttribute("fill-rule","evenodd"),"low"===n?y.setAttribute("fill","#638f65"):"medium"===n?y.setAttribute("fill","#b0ba65"):y.setAttribute("fill","#ad6749"),s.appendChild(y),m.appendChild(s),a.appendChild(m);let g=document.createElement("td");g.innerHTML=d,a.appendChild(g);let E=document.createElement("td");E.innerHTML=o,a.appendChild(E);let f=document.createElement("td");f.innerHTML=i,a.appendChild(f);let p=document.createElement("td");p.innerHTML=l,a.appendChild(p);let h=document.createElement("td");h.innerHTML='<button class="edit-btn">✎</button>',a.appendChild(h),document.querySelector("tbody").appendChild(a)}}function r(e){document.getElementById("table-title").innerHTML=e}function u(){document.getElementById("edit-form").reset(),document.getElementById("modal-form").reset(),document.getElementById("category-form").reset()}function m(){const t=document.getElementById("category-list"),n=document.querySelector("#main-category"),d=document.querySelector("#edit-category");t.innerHTML="",n.innerHTML="",d.innerHTML="";let o=document.createElement("option");o.value="add",o.id="last-option",o.innerText="Add new category...",n.appendChild(o);let i=document.createElement("option");i.value="add",i.id="last-option",i.innerText="Add new category...",d.appendChild(i);for(let l=0;l<e.categories.length;l++){let a=e.categories[l],c=document.createElement("li");c.innerHTML='<a id="'+a+'"href="#" onclick="return false;">'+a+'</a><button class="remove-cat-btn" data-set = '+l+">✎</button>",t.appendChild(c);let r=document.createElement("option");r.value=a,r.innerHTML=a;let u=r.cloneNode(!0);n.insertBefore(r,o),d.insertBefore(u,i)}document.getElementById("main-text-category").style.display="none",document.getElementById("edit-text-category").style.display="none"}const s=document.getElementById("modal-submit");let y,g,E,f="viewAll";function p(){r("Viewing All Tasks"),f="viewAll",c(e.itemArray)}function h(){f="today",c(e.dailyFilter()),r("Viewing Today's Tasks")}function v(){f="thisWeek",c(e.weeklyFilter()),r("Viewing This Week's Tasks")}function w(t){let n=e.categoryFilter(t);r("Viewing all "+t+" tasks"),c(n)}s.addEventListener("click",(function(){let t=document.getElementById("priority").value,n=document.getElementById("title").value,d=document.getElementById("description").value,o=document.getElementById("due-date").value,i=document.getElementById("main-category").value;switch("add"===i&&(i=document.getElementById("main-text-category").value.toLowerCase(),e.addCategory(i),m()),e.addItem(e.itemFactory(!1,t,n,d,o,i)),a.hideModal(),f){case"viewAll":p();break;case"today":h();break;case"thisWeek":v()}"viewAll"!=f&&"today"!=f&&"thisWeek"!=f&&w(f),u()})),document.addEventListener("click",(function(t){if(t.target&&"edit-btn"===t.target.className)y=t.target.parentElement.parentElement.getAttribute("data-set"),function(t){a.showEditModal();let n=e.itemArray[t].priority;document.getElementById("edit-priority").value=n;let d=e.itemArray[t].title;document.getElementById("edit-title").value=d;let o=e.itemArray[t].description;document.getElementById("edit-description").value=o;let i=e.itemArray[t].dueDate;document.getElementById("edit-date").value=i;let l=e.itemArray[t].category;document.getElementById("edit-category").value=l}(y);else if(e.categories.includes(t.target.innerText.toLowerCase())&&"A"==t.target.tagName){let e=t.target.innerText.toLowerCase();f=e,w(e)}else if(t.target&&"remove-cat-btn"===t.target.className){let d=t.target.getAttribute("data-set"),o=e.categories[d];n=o,a.showEditCategoryModal(),document.getElementById("edit-category-sidebar").value=n,g=o,f=g}var n})),document.getElementById("edit-submit").addEventListener("click",(function(){let t=document.getElementById("edit-priority").value,n=document.getElementById("edit-title").value,d=document.getElementById("edit-description").value,o=document.getElementById("edit-date").value,i=document.getElementById("edit-category").value;switch("add"===i&&(i=document.getElementById("edit-text-category").value.toLowerCase(),e.addCategory(i),m()),e.editItem(y,t,n,d,o,i),a.hideEditModal(),f){case"viewAll":c(e.itemArray);break;case"today":h();break;case"thisWeek":v()}"viewAll"!=f&&"today"!=f&&"thisWeek"!=f&&w(f),u()})),document.getElementById("edit-category-submit").addEventListener("click",(function(){switch(E=document.getElementById("edit-category-sidebar").value,f=E,e.editCategory(g,E),a.hideEditCategoryModal(),m(),f){case"viewAll":p();break;case"today":h();break;case"thisWeek":v()}"viewAll"!=f&&"today"!=f&&"thisWeek"!=f&&w(f),u()})),document.getElementById("delete-item").addEventListener("click",(function(){e.deleteItem(y),a.hideEditModal(),c(e.itemArray)})),document.getElementById("view-all").addEventListener("click",(function(){r("Viewing All Tasks"),f="viewAll",c(e.itemArray)})),document.getElementById("today").addEventListener("click",(function(){h()})),document.getElementById("this-week").addEventListener("click",(function(){v()})),document.getElementById("category-submit").addEventListener("click",(function(){const t=document.getElementById("category-category").value.toLowerCase();e.addCategory(t),w(t),m(),a.hideCategoryModal(),u()})),document.getElementById("delete-category").addEventListener("click",(function(){a.hideEditCategoryModal(),document.getElementById("delete-category-name").innerText=g,document.querySelector(".delete-category-warning").style.display="flex",document.getElementById("confirm-delete").addEventListener("click",(function(){e.deleteCategory(g),document.querySelector(".delete-category-warning").style.display="none",m(),p()})),document.getElementById("cancel-delete").addEventListener("click",(function(){document.querySelector(".delete-category-warning").style.display="none",a.showEditCategoryModal()}))}))})();