(()=>{"use strict";const e=function(){let e=[],t=["personal","work"];function n(e){e.sort(((e,t)=>e.dueDate>t.dueDate?1:-1))}return{allCurrentTasks:function(){let t=[];for(let n=0;n<e.length;n++)if(!1===e[n].status){let d=e[n];d.dataSet=n,t.push(d)}return t},updateStatus:function(t){return!1===e[t].status?e[t].status=!0:e[t].status=!1},completedFilter:function(){let t=[];for(let n=0;n<e.length;n++)if(!0===e[n].status){let d=e[n];d.dataSet=n,t.push(d)}return t},addItem:function(t){e.push(t),n(e)},itemFactory:(e,t,n,d,l,i)=>({status:e,priority:t,title:n,description:d,dueDate:l,category:i}),editItem:function(t,d,l,i,o,a){e[t].priority=d,e[t].title=l,e[t].description=i,e[t].dueDate=o,e[t].category=a,n(e)},deleteItem:function(t){e.splice(t,1),n(e)},weeklyFilter:function(){const t=new Date;let n=t.toISOString().slice(0,10);t.setDate(t.getDate()+7);let d=t.toISOString().slice(0,10),l=[];for(let t=0;t<e.length;t++)if(e[t].dueDate>=n&&e[t].dueDate<=d&&!1===e[t].status){let n=e[t];n.dataSet=t,l.push(n)}return l},dailyFilter:function(){let t=(new Date).toISOString().slice(0,10),n=[];for(let d=0;d<e.length;d++)if(e[d].dueDate==t&&!1===e[d].status){let t=e[d];t.dataSet=d,n.push(t)}return n},categoryFilter:function(t){let n=[];for(let d=0;d<e.length;d++)if(e[d].category==t&&!1===e[d].status){let t=e[d];t.dataSet=d,n.push(t)}return n},itemArray:e,categories:t,addCategory:function(e){t.push(e)},editCategory:function(n,d){if(0==t.includes(d)){for(let t=0;t<e.length;t++)e[t].category===n&&(e[t].category=d);for(let e=0;e<t.length;e++)t[e]===n&&(t[e]=d)}},deleteCategory:function(n){for(let t=0;t<e.length;t++)e[t].category===n&&e.splice(t);for(let e=0;e<t.length;e++)t[e]===n&&t.splice(e,1)}}}(),t=document.getElementById("add-item"),n=document.getElementById("add-cat"),d=document.getElementById("modal-close"),l=document.getElementById("edit-close"),i=document.getElementById("category-close"),o=document.getElementById("edit-category-close");let a=function(){function e(){r(),c(),document.querySelector(".modal").style.display="flex"}function a(){document.querySelector(".modal").style.display="none"}function c(){document.querySelector(".edit-modal").style.display="none"}function r(){document.querySelector(".category-modal").style.display="none"}function u(){document.querySelector(".edit-category-modal").style.display="none"}function m(){a(),c(),document.querySelector(".category-modal").style.display="flex"}return t.addEventListener("click",(function(){e()})),d.addEventListener("click",(function(){a()})),l.addEventListener("click",(function(){c()})),o.addEventListener("click",(function(){u()})),n.addEventListener("click",(function(){m()})),i.addEventListener("click",(function(){r()})),s(),{showModal:e,hideModal:a,showEditModal:function(){a(),r(),document.querySelector(".edit-modal").style.display="flex"},hideEditModal:c,showCategoryModal:m,hideCategoryModal:r,showEditCategoryModal:function(){document.querySelector(".edit-category-modal").style.display="flex"},hideEditCategoryModal:u}}();function c(e){for(;document.querySelector("tbody").childNodes.length>1;)document.querySelector("tbody").removeChild(document.querySelector("tbody").lastChild);for(let t=0;t<e.length;t++){let n=e[t].priority,d=e[t].title,l=e[t].description,i=e[t].dueDate,o=e[t].category,a=e[t].status,c=e[t].dataSet,r=document.createElement("tr");r.setAttribute("data-set",t),r.setAttribute("original-index",c);let u=document.createElement("td"),s=document.createElement("a");s.setAttribute("class","status-change"),s.setAttribute("href","#"),s.setAttribute("onclick","return false;");let m=document.createElement("img");!0===a?(m.setAttribute("src","../src/images/checked.svg"),m.setAttribute("width","20px"),m.setAttribute("height","20px"),m.setAttribute("class","checked")):(m.setAttribute("src","../src/images/unchecked.svg"),m.setAttribute("width","20px"),m.setAttribute("height","20px"),m.setAttribute("class","unchecked")),s.appendChild(m),u.appendChild(s),r.appendChild(u);let y=document.createElement("td"),g=document.createElementNS("http://www.w3.org/2000/svg","svg");g.setAttribute("viewBox","0 0 12 12"),g.setAttribute("width","20px"),g.setAttribute("height","20px"),g.setAttribute("overflow","visible");let E=document.createElementNS("http://www.w3.org/2000/svg","circle");E.setAttribute("cx","6"),E.setAttribute("cy","6"),E.setAttribute("r","6"),E.setAttribute("fill-rule","evenodd"),"low"===n?E.setAttribute("fill","#638f65"):"medium"===n?E.setAttribute("fill","#b0ba65"):E.setAttribute("fill","#ad6749"),g.appendChild(E),y.appendChild(g),r.appendChild(y);let p=document.createElement("td");p.innerHTML=d,r.appendChild(p);let f=document.createElement("td");f.innerHTML=l,r.appendChild(f);let h=document.createElement("td");h.innerHTML=i,r.appendChild(h);let v=document.createElement("td");v.innerHTML=o,r.appendChild(v);let I=document.createElement("td");I.innerHTML='<button class="edit-btn">✎</button>',r.appendChild(I),document.querySelector("tbody").appendChild(r)}}function r(e){document.getElementById("table-title").innerHTML=e}function u(){document.getElementById("edit-form").reset(),document.getElementById("modal-form").reset(),document.getElementById("category-form").reset()}function s(){const t=document.getElementById("category-list"),n=document.querySelector("#main-category"),d=document.querySelector("#edit-category");t.innerHTML="",n.innerHTML="",d.innerHTML="";let l=document.createElement("option");l.value="add",l.id="last-option",l.innerText="Add new category...",n.appendChild(l);let i=document.createElement("option");i.value="add",i.id="last-option",i.innerText="Add new category...",d.appendChild(i);for(let o=0;o<e.categories.length;o++){let a=e.categories[o],c=document.createElement("li");c.innerHTML='<a id="'+a+'"href="#" onclick="return false;">'+a+'</a><button class="remove-cat-btn" data-set = '+o+">✎</button>",t.appendChild(c);let r=document.createElement("option");r.value=a,r.innerHTML=a;let u=r.cloneNode(!0);n.insertBefore(r,l),d.insertBefore(u,i)}document.getElementById("main-text-category").style.display="none",document.getElementById("edit-text-category").style.display="none"}const m=document.getElementById("modal-submit");let y,g,E,p,f="viewAll";function h(){r("Viewing All Tasks"),c(e.allCurrentTasks()),f="viewAll"}function v(){f="today",c(e.dailyFilter()),r("Viewing Today's Tasks")}function I(){f="thisWeek",c(e.weeklyFilter()),r("Viewing This Week's Tasks")}function b(){f="completedTasks";let t=e.completedFilter();console.log(t),c(t),r("Viewing Completed Tasks")}function B(t){f=t;let n=e.categoryFilter(t);r("Viewing all "+t+" tasks"),c(n)}function k(){switch(f){case"viewAll":h();break;case"today":v();break;case"thisWeek":I();break;case"completedTasks":b()}"viewAll"!=f&&"today"!=f&&"thisWeek"!=f&&"completedTasks"!=f&&B(f),u()}m.addEventListener("click",(function(){let t=document.getElementById("priority").value,n=document.getElementById("title").value,d=document.getElementById("description").value,l=document.getElementById("due-date").value,i=document.getElementById("main-category").value;"add"===i&&(i=document.getElementById("main-text-category").value.toLowerCase(),e.addCategory(i),s()),e.addItem(e.itemFactory(!1,t,n,d,l,i)),a.hideModal(),k()})),document.addEventListener("click",(function(t){if(t.target&&"edit-btn"===t.target.className)y=t.target.parentElement.parentElement.getAttribute("original-index"),function(t){a.showEditModal();let n=e.itemArray[t].priority;document.getElementById("edit-priority").value=n;let d=e.itemArray[t].title;document.getElementById("edit-title").value=d;let l=e.itemArray[t].description;document.getElementById("edit-description").value=l;let i=e.itemArray[t].dueDate;document.getElementById("edit-date").value=i;let o=e.itemArray[t].category;document.getElementById("edit-category").value=o}(y);else if(e.categories.includes(t.target.id)&&"A"==t.target.tagName){let e=t.target.innerText.toLowerCase();f=e,B(e)}else if(t.target&&"remove-cat-btn"===t.target.className){let d=t.target.getAttribute("data-set"),l=e.categories[d];n=l,a.showEditCategoryModal(),document.getElementById("edit-category-sidebar").value=n,g=l,f=g}else"status-change"===t.target.parentElement.className&&(p=t.target.parentElement.parentElement.parentElement.getAttribute("original-index"),console.log(p),e.updateStatus(p),k(),console.log(e.itemArray));var n})),document.getElementById("edit-submit").addEventListener("click",(function(){let t=document.getElementById("edit-priority").value,n=document.getElementById("edit-title").value,d=document.getElementById("edit-description").value,l=document.getElementById("edit-date").value,i=document.getElementById("edit-category").value;"add"===i&&(i=document.getElementById("edit-text-category").value.toLowerCase(),e.addCategory(i),s()),e.editItem(y,t,n,d,l,i),a.hideEditModal(),k()})),document.getElementById("edit-category-submit").addEventListener("click",(function(){E=document.getElementById("edit-category-sidebar").value,f=E,e.editCategory(g,E),a.hideEditCategoryModal(),s(),k()})),document.getElementById("delete-item").addEventListener("click",(function(){e.deleteItem(y),a.hideEditModal(),c(e.itemArray)})),document.getElementById("view-all").addEventListener("click",(function(){h()})),document.getElementById("today").addEventListener("click",(function(){v()})),document.getElementById("this-week").addEventListener("click",(function(){I()})),document.getElementById("completed-tasks").addEventListener("click",(function(){b()})),document.getElementById("category-submit").addEventListener("click",(function(){const t=document.getElementById("category-category").value.toLowerCase();e.addCategory(t),B(t),s(),a.hideCategoryModal(),u()})),document.getElementById("delete-category").addEventListener("click",(function(){a.hideEditCategoryModal(),document.getElementById("delete-category-name").innerText=g,document.querySelector(".delete-category-warning").style.display="flex",document.getElementById("confirm-delete").addEventListener("click",(function(){e.deleteCategory(g),document.querySelector(".delete-category-warning").style.display="none",s(),h()})),document.getElementById("cancel-delete").addEventListener("click",(function(){document.querySelector(".delete-category-warning").style.display="none",a.showEditCategoryModal()}))}))})();